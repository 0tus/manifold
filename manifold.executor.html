<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>manifold.executor documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Manifold 0.1.2-alpha2 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>manifold</span></div></div></li><li class="depth-2 branch"><a href="manifold.bus.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bus</span></div></a></li><li class="depth-2 branch"><a href="manifold.deferred.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deferred</span></div></a></li><li class="depth-2 branch current"><a href="manifold.executor.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>executor</span></div></a></li><li class="depth-2 branch"><a href="manifold.stream.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stream</span></div></a></li><li class="depth-2"><a href="manifold.time.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>time</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="manifold.executor.html#var-execute-pool"><div class="inner"><span>execute-pool</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-executor"><div class="inner"><span>executor</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-executor-thread-local"><div class="inner"><span>executor-thread-local</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-fixed-thread-executor"><div class="inner"><span>fixed-thread-executor</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-instrumented-executor"><div class="inner"><span>instrumented-executor</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-register-execute-pool-stats-callback"><div class="inner"><span>register-execute-pool-stats-callback</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-register-wait-pool-stats-callback"><div class="inner"><span>register-wait-pool-stats-callback</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-stats-.3Emap"><div class="inner"><span>stats-&gt;map</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-thread-factory"><div class="inner"><span>thread-factory</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-unregister-execute-pool-stats-callback"><div class="inner"><span>unregister-execute-pool-stats-callback</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-unregister-wait-pool-stats-callback"><div class="inner"><span>unregister-wait-pool-stats-callback</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-utilization-executor"><div class="inner"><span>utilization-executor</span></div></a></li><li class="depth-1"><a href="manifold.executor.html#var-wait-pool"><div class="inner"><span>wait-pool</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">manifold.executor</h2><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-execute-pool"><h3>execute-pool</h3><div class="usage"><code>(execute-pool)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L224">view source</a></div></div><div class="public anchor" id="var-executor"><h3>executor</h3><div class="usage"><code>(executor)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L24">view source</a></div></div><div class="public anchor" id="var-executor-thread-local"><h3>executor-thread-local</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L22">view source</a></div></div><div class="public anchor" id="var-fixed-thread-executor"><h3>fixed-thread-executor</h3><div class="usage"><code>(fixed-thread-executor num-threads)</code><code>(fixed-thread-executor num-threads options)</code></div><div class="doc"><div class="markdown"><p>Returns an executor which has a fixed number of threads.</p></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L134">view source</a></div></div><div class="public anchor" id="var-instrumented-executor"><h3>instrumented-executor</h3><div class="usage"><code>(instrumented-executor {:keys [thread-factory queue-length stats-callback sample-period control-period controller metrics initial-thread-count onto?], :or {initial-thread-count 1, sample-period 25, control-period 10000, metrics (EnumSet/allOf Stats$Metric), onto? true}})</code></div><div class="doc"><div class="markdown"><p>Returns a <code>java.util.concurrent.ExecutorService</code>, using <a href="https://github.com/ztellman/dirigiste">Dirigiste</a>.</p>
<table>
  <tbody>
    <tr>
      <td align="left"><code>thread-factory</code> </td>
      <td align="left">an optional <code>java.util.concurrent.ThreadFactory</code> that creates the executor&rsquo;s thrreads. </td>
    </tr>
    <tr>
      <td align="left"><code>queue-length</code> </td>
      <td align="left">the maximum number of pending tasks before <code>.execute()</code> begins throwing <code>java.util.concurrent.RejectedExecutionException</code>, defaults to <code>0</code>.</td>
    </tr>
    <tr>
      <td align="left"><code>stats-callback</code> </td>
      <td align="left">a function that will be invoked every <code>control-period</code> with the relevant statistics for the executor.</td>
    </tr>
    <tr>
      <td align="left"><code>sample-period</code> </td>
      <td align="left">the interval, in milliseconds, between sampling the state of the executor for resizing and gathering statistics, defaults to <code>25</code>.</td>
    </tr>
    <tr>
      <td align="left"><code>control-period</code> </td>
      <td align="left">the interval, in milliseconds, between use of the controller to adjust the size of the executor, defaults to <code>10000</code>.</td>
    </tr>
    <tr>
      <td align="left"><code>controller</code> </td>
      <td align="left">the Dirigiste controller that is used to guide the pool&rsquo;s size.</td>
    </tr>
    <tr>
      <td align="left"><code>metrics</code> </td>
      <td align="left">an <code>EnumSet</code> of the metrics that should be gathered for the controller, defaults to all.</td>
    </tr>
    <tr>
      <td align="left"><code>initial-thread-count</code> </td>
      <td align="left">the number of threads that the pool should begin with.</td>
    </tr>
    <tr>
      <td align="left"><code>onto?</code> </td>
      <td align="left">if true, all streams and deferred generated in the scope of this executor will also be &lsquo;on&rsquo; this executor.</td>
    </tr>
  </tbody>
</table></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L71">view source</a></div></div><div class="public anchor" id="var-register-execute-pool-stats-callback"><h3>register-execute-pool-stats-callback</h3><div class="usage"><code>(register-execute-pool-stats-callback c)</code></div><div class="doc"><div class="markdown"><p>Registers a callback which will be called with execute-pool stats.</p></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L200">view source</a></div></div><div class="public anchor" id="var-register-wait-pool-stats-callback"><h3>register-wait-pool-stats-callback</h3><div class="usage"><code>(register-wait-pool-stats-callback c)</code></div><div class="doc"><div class="markdown"><p>Registers a callback which will be called with wait-pool stats.</p></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L169">view source</a></div></div><div class="public anchor" id="var-stats-.3Emap"><h3>stats-&gt;map</h3><div class="usage"><code>(stats-&gt;map s)</code><code>(stats-&gt;map s quantiles)</code></div><div class="doc"><div class="markdown"><p>Converts a Dirigiste <code>Stats</code> object into a map of values onto quantiles.</p></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L45">view source</a></div></div><div class="public anchor" id="var-thread-factory"><h3>thread-factory</h3><div class="usage"><code>(thread-factory name-generator executor-promise)</code><code>(thread-factory name-generator executor-promise stack-size)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L27">view source</a></div></div><div class="public anchor" id="var-unregister-execute-pool-stats-callback"><h3>unregister-execute-pool-stats-callback</h3><div class="usage"><code>(unregister-execute-pool-stats-callback c)</code></div><div class="doc"><div class="markdown"><p>Unregisters a previous execute-pool stats callback.</p></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L205">view source</a></div></div><div class="public anchor" id="var-unregister-wait-pool-stats-callback"><h3>unregister-wait-pool-stats-callback</h3><div class="usage"><code>(unregister-wait-pool-stats-callback c)</code></div><div class="doc"><div class="markdown"><p>Unregisters a previous wait-pool stats callback.</p></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L174">view source</a></div></div><div class="public anchor" id="var-utilization-executor"><h3>utilization-executor</h3><div class="usage"><code>(utilization-executor utilization)</code><code>(utilization-executor utilization max-threads)</code><code>(utilization-executor utilization max-threads options)</code></div><div class="doc"><div class="markdown"><p>Returns an executor which sizes the thread pool according to target utilization, within <code>[0,1]</code>, up to <code>max-threads</code>. The <code>queue-length</code> for this executor is always <code>0</code>, and by default has an unbounded number of threads.</p></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L150">view source</a></div></div><div class="public anchor" id="var-wait-pool"><h3>wait-pool</h3><div class="usage"><code>(wait-pool)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/ztellman/manifold/blob/master/src/manifold/executor.clj#L193">view source</a></div></div></div></body></html>